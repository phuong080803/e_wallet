@startuml Authentication Module Use Case
!theme plain
title "MODULE XÁC THỰC (AUTHENTICATION)"

left to right direction

actor "User" as User
actor "Supabase System" as Supabase
actor "Email Service" as EmailService

rectangle "Authentication Module" {
    usecase "UC01: Đăng ký tài khoản" as UC01
    usecase "UC02: Đăng nhập" as UC02
    usecase "UC03: Quên mật khẩu" as UC03
    usecase "UC13: Đăng xuất" as UC13
    
    usecase "Nhập thông tin cá nhân" as Input01
    usecase "Xác thực email" as Verify01
    usecase "Tạo tài khoản mới" as Create01
    
    usecase "Nhập email/mật khẩu" as Input02
    usecase "Xác thực thông tin" as Verify02
    usecase "Tạo phiên đăng nhập" as Session02
    
    usecase "Nhập email" as Input03
    usecase "Gửi OTP qua email" as OTP03
    usecase "Xác thực OTP" as VerifyOTP03
    usecase "Đặt lại mật khẩu" as Reset03
    
    usecase "Xóa phiên đăng nhập" as Clear13
    usecase "Xóa token lưu trữ" as ClearToken13
}

User --> UC01
User --> UC02
User --> UC03
User --> UC13

UC01 --> Input01
UC01 --> Verify01
UC01 --> Create01

UC02 --> Input02
UC02 --> Verify02
UC02 --> Session02

UC03 --> Input03
UC03 --> OTP03
UC03 --> VerifyOTP03
UC03 --> Reset03

UC13 --> Clear13
UC13 --> ClearToken13

Supabase --> Verify01
Supabase --> Create01
Supabase --> Verify02
Supabase --> Session02
Supabase --> VerifyOTP03
Supabase --> Reset03
Supabase --> Clear13
Supabase --> ClearToken13

EmailService --> Verify01
EmailService --> OTP03

@enduml

@startuml Profile Module Use Case
!theme plain
title "MODULE QUẢN LÝ THÔNG TIN CÁ NHÂN (PROFILE)"

left to right direction

actor "User" as User
actor "Supabase System" as Supabase

rectangle "Profile Module" {
    usecase "UC04: Quản lý thông tin cá nhân" as UC04
    usecase "UC05: Xác minh danh tính" as UC05
    usecase "UC10: Quản lý thẻ ngân hàng" as UC10
    
    usecase "Xem thông tin cá nhân" as View04
    usecase "Chỉnh sửa thông tin" as Edit04
    usecase "Cập nhật ảnh đại diện" as UpdateImg04
    usecase "Lưu thay đổi" as Save04
    
    usecase "Nhập số điện thoại" as Phone05
    usecase "Nhập số CMND/CCCD" as ID05
    usecase "Upload ảnh CMND/CCCD" as Upload05
    usecase "Gửi yêu cầu xác minh" as Submit05
    
    usecase "Xem danh sách thẻ" as ViewCards10
    usecase "Thêm thẻ mới" as AddCard10
    usecase "Xóa thẻ" as DeleteCard10
    usecase "Cập nhật thông tin thẻ" as UpdateCard10
}

User --> UC04
User --> UC05
User --> UC10

UC04 --> View04
UC04 --> Edit04
UC04 --> UpdateImg04
UC04 --> Save04

UC05 --> Phone05
UC05 --> ID05
UC05 --> Upload05
UC05 --> Submit05

UC10 --> ViewCards10
UC10 --> AddCard10
UC10 --> DeleteCard10
UC10 --> UpdateCard10

Supabase --> View04
Supabase --> Save04
Supabase --> Upload05
Supabase --> Submit05
Supabase --> ViewCards10
Supabase --> AddCard10
Supabase --> DeleteCard10
Supabase --> UpdateCard10

@enduml

@startuml Wallet Module Use Case
!theme plain
title "MODULE VÍ ĐIỆN TỬ (WALLET)"

left to right direction

actor "User" as User
actor "Supabase System" as Supabase
actor "Email Service" as EmailService

rectangle "Wallet Module" {
    usecase "UC06: Tạo ví điện tử" as UC06
    usecase "UC07: Xem thông tin ví" as UC07
    usecase "UC08: Chuyển tiền" as UC08
    usecase "UC09: Xem lịch sử giao dịch" as UC09
    
    usecase "Kiểm tra điều kiện tạo ví" as Check06
    usecase "Tạo ID ví 10 chữ số" as GenID06
    usecase "Khởi tạo số dư ban đầu" as InitBalance06
    usecase "Lưu thông tin ví" as SaveWallet06
    
    usecase "Hiển thị số dư hiện tại" as ShowBalance07
    usecase "Hiển thị ID ví" as ShowID07
    usecase "Hiển thị thông tin ví" as ShowInfo07
    usecase "Hiển thị các thao tác nhanh" as ShowActions07
    
    usecase "Nhập ID ví người nhận" as InputRecipient08
    usecase "Tìm kiếm thông tin người nhận" as SearchRecipient08
    usecase "Nhập số tiền chuyển" as InputAmount08
    usecase "Nhập ghi chú" as InputNotes08
    usecase "Xác thực OTP" as VerifyOTP08
    usecase "Thực hiện giao dịch" as ProcessTrans08
    usecase "Hiển thị kết quả" as ShowResult08
    
    usecase "Hiển thị danh sách giao dịch" as ShowTrans09
    usecase "Lọc theo loại giao dịch" as FilterType09
    usecase "Lọc theo thời gian" as FilterTime09
    usecase "Xem chi tiết giao dịch" as ViewDetail09
}

User --> UC06
User --> UC07
User --> UC08
User --> UC09

UC06 --> Check06
UC06 --> GenID06
UC06 --> InitBalance06
UC06 --> SaveWallet06

UC07 --> ShowBalance07
UC07 --> ShowID07
UC07 --> ShowInfo07
UC07 --> ShowActions07

UC08 --> InputRecipient08
UC08 --> SearchRecipient08
UC08 --> InputAmount08
UC08 --> InputNotes08
UC08 --> VerifyOTP08
UC08 --> ProcessTrans08
UC08 --> ShowResult08

UC09 --> ShowTrans09
UC09 --> FilterType09
UC09 --> FilterTime09
UC09 --> ViewDetail09

Supabase --> Check06
Supabase --> GenID06
Supabase --> SaveWallet06
Supabase --> ShowBalance07
Supabase --> ShowInfo07
Supabase --> SearchRecipient08
Supabase --> ProcessTrans08
Supabase --> ShowTrans09

EmailService --> VerifyOTP08

@enduml

@startuml Admin Module Use Case
!theme plain
title "MODULE QUẢN TRỊ (ADMIN)"

left to right direction

actor "Admin" as Admin
actor "Supabase System" as Supabase

rectangle "Admin Module" {
    usecase "UC14: Đăng nhập admin" as UC14
    usecase "UC15: Quản lý người dùng" as UC15
    usecase "UC16: Xác thực danh tính" as UC16
    usecase "UC17: Xem báo cáo giao dịch" as UC17
    usecase "UC18: Quản lý hệ thống" as UC18
    usecase "UC19: Đăng xuất admin" as UC19
    
    usecase "Xác thực quyền admin" as AuthAdmin14
    usecase "Tạo phiên admin" as CreateSession14
    usecase "Chuyển đến dashboard admin" as Dashboard14
    
    usecase "Xem danh sách người dùng" as ViewUsers15
    usecase "Xem thông tin chi tiết người dùng" as ViewUserDetail15
    usecase "Khóa/Mở khóa tài khoản" as LockUser15
    usecase "Xóa tài khoản người dùng" as DeleteUser15
    
    usecase "Xem danh sách yêu cầu xác minh" as ViewRequests16
    usecase "Xem chi tiết yêu cầu" as ViewRequestDetail16
    usecase "Phê duyệt yêu cầu" as ApproveRequest16
    usecase "Từ chối yêu cầu" as RejectRequest16
    usecase "Thêm ghi chú admin" as AddNotes16
    
    usecase "Xem tổng quan giao dịch" as ViewTransOverview17
    usecase "Lọc theo thời gian" as FilterTime17
    usecase "Lọc theo loại giao dịch" as FilterType17
    usecase "Xuất báo cáo" as ExportReport17
    usecase "Xem chi tiết giao dịch" as ViewTransDetail17
    
    usecase "Xem thống kê hệ thống" as ViewStats18
    usecase "Quản lý cấu hình" as ManageConfig18
    usecase "Bảo trì hệ thống" as Maintenance18
    
    usecase "Xóa phiên admin" as ClearSession19
    usecase "Chuyển về màn hình đăng nhập" as BackToLogin19
}

Admin --> UC14
Admin --> UC15
Admin --> UC16
Admin --> UC17
Admin --> UC18
Admin --> UC19

UC14 --> AuthAdmin14
UC14 --> CreateSession14
UC14 --> Dashboard14

UC15 --> ViewUsers15
UC15 --> ViewUserDetail15
UC15 --> LockUser15
UC15 --> DeleteUser15

UC16 --> ViewRequests16
UC16 --> ViewRequestDetail16
UC16 --> ApproveRequest16
UC16 --> RejectRequest16
UC16 --> AddNotes16

UC17 --> ViewTransOverview17
UC17 --> FilterTime17
UC17 --> FilterType17
UC17 --> ExportReport17
UC17 --> ViewTransDetail17

UC18 --> ViewStats18
UC18 --> ManageConfig18
UC18 --> Maintenance18

UC19 --> ClearSession19
UC19 --> BackToLogin19

Supabase --> AuthAdmin14
Supabase --> CreateSession14
Supabase --> ViewUsers15
Supabase --> ViewUserDetail15
Supabase --> LockUser15
Supabase --> DeleteUser15
Supabase --> ViewRequests16
Supabase --> ViewRequestDetail16
Supabase --> ApproveRequest16
Supabase --> RejectRequest16
Supabase --> AddNotes16
Supabase --> ViewTransOverview17
Supabase --> ViewTransDetail17
Supabase --> ViewStats18
Supabase --> ManageConfig18
Supabase --> ClearSession19

@enduml
